<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.6.0.783524690813">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.6.0">

    <!-- Primary Meta Tags -->
    <title>Engine</title>
    <meta name="title" content="Engine">
    <meta name="description" content="To install EZKL engine, simply use your favorite package manager:">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.ezkl.xyz/js_bindings/engine/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.ezkl.xyz/js_bindings/engine/">
    <meta property="og:title" content="Engine">
    <meta property="og:description" content="To install EZKL engine, simply use your favorite package manager:">
    <meta property="og:image" content="https://github.com/codespaces/badge.svg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.ezkl.xyz/js_bindings/engine/">
    <meta property="twitter:title" content="Engine">
    <meta property="twitter:description" content="To install EZKL engine, simply use your favorite package manager:">
    <meta property="twitter:image" content="https://github.com/codespaces/badge.svg">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../resources/css/retype.css?v=3.6.0.783524690813" rel="stylesheet">

    <script data-cfasync="false" src="../../resources/js/config.js?v=3.6.0.783524690813" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../resources/js/retype.js?v=3.6.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../resources/js/lunr.js?v=3.6.0.783524690813" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../resources/js/prism.js?v=3.6.0.783524690813" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../" class="flex items-center leading-snug text-2xl">
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">EZKL</span>
                        </a><span class="hidden px-2 py-1 ml-4 text-sm font-semibold leading-none text-root-logo-label-text bg-root-logo-label-bg rounded-sm md:inline-block">Docs</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/zkonduit/ezkl">EZKL GitHub</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/mqgdwdSgzA">EZKL Discord</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://t.me/+QRzaRvTPIthlYWMx">EZKL Telegram</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://blog.ezkl.xyz">EZKL Blog</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/zkonduit/ezkl">EZKL GitHub</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/mqgdwdSgzA">EZKL Discord</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://t.me/+QRzaRvTPIthlYWMx">EZKL Telegram</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://blog.ezkl.xyz">EZKL Blog</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="engine" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#engine">#</doc-anchor-trigger>
        <span>Engine</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="installation">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#installation">#</doc-anchor-trigger>
        <span>Installation</span>
    </h2>
</doc-anchor-target>
<p>To install EZKL engine, simply use your favorite package manager:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># npm
npm install @ezkljs/engine

# yarn
yarn add @ezkljs/engine

# pnpm
pnpm add @ezkljs/engine</code></pre>
</doc-codeblock></div>
<hr>
<p>If you want to get your hands dirty with the Engine bindings, check out this github codespace: <a href="https://codespaces.new/zkonduit/ezkljs-engine"><img src="https://github.com/codespaces/badge.svg" alt="Open in GitHub Codespaces" /></a>
It contains descriptive Jest tests that show you how to use the various bindings available in <code v-pre>@ezkljs/engine/nodejs</code> package as well as an example
Next.js application that demos the <code v-pre>@ezkljs/engine/web</code> web bundle. Simply run <code v-pre>pnpm run test</code> to execute all of the tests in the codespace. Everything should work out of the box, no setup commands necessary.</p>
<p>To view each test, open the <code v-pre>tests</code> directory and click on the test you want to view. All of them are written in typescript and are well documented.</p>
<p>To spin up the example web app locally run <code v-pre>pnpm run dev</code></p>
<p>We have broken down the tests for the bindings into 4 different files:</p>
<ul>
<li><a href="https://github.com/zkonduit/ezkljs-engine/blob/main/tests/elgamalEncryption.test.ts">elgamalEncrypt.test.ts</a></li>
<li><a href="https://github.com/zkonduit/ezkljs-engine/blob/main/tests/proveVerify.test.ts">proveVerify.test.ts</a></li>
<li><a href="https://github.com/zkonduit/ezkljs-engine/blob/main/tests/poseidonHash.test.ts">poseidonHash.test.ts</a></li>
<li><a href="https://github.com/zkonduit/ezkljs-engine/tree/main/tests/fieldElementUtils.test.ts">fieldElementUtils.test.ts</a></li>
</ul>
<p>The engine exposes JS bindings to the main ezkl repo that make hashing, encrypting, decrypting, proving and verifying in the browser/nodejs context seamless:</p>
<ul>
<li><doc-anchor-trigger to="#generating-a-witness">genWitness</doc-anchor-trigger>: Generate a witness from a given input.</li>
<li><doc-anchor-trigger to="#elgamal-variables">elgamalGenRandom</doc-anchor-trigger>: Generate an ElGamal keypair from a random seed.</li>
<li><doc-anchor-trigger to="#elgamal-encrypt">elgamalEncrypt</doc-anchor-trigger>: Encypt an arbitrary message using the ElGamal public key and randomness.</li>
<li><doc-anchor-trigger to="#elgamal-decrypt">elgamalDecrypt</doc-anchor-trigger>: Decrypt a cipher text using the ElGamal secret key</li>
<li><doc-anchor-trigger to="#prove">prove</doc-anchor-trigger>: Generate a proof</li>
<li><doc-anchor-trigger to="#verify">verify</doc-anchor-trigger>: Verify a given proof</li>
<li><doc-anchor-trigger to="#hash">poseidonHash</doc-anchor-trigger>: Hash a given message using the Poseidon hash function</li>
</ul>
<p>As well as some helper functions that make formatting data to and from field elements (the way numbers are represented in ZK):</p>
<ul>
<li><doc-anchor-trigger to="#vecU64ToFelt">vecU64ToFelt</doc-anchor-trigger>: Converts 4 u64s to a field element (hex string)</li>
<li><doc-anchor-trigger to="#vecU64ToInt">vecU64ToInt</doc-anchor-trigger>: Converts 4 u64s representing a field element directly to an integer</li>
<li><doc-anchor-trigger to="#vecU64ToFloat">vecU64ToFloat</doc-anchor-trigger>: Converts 4 u64s representing a field element directly to a (rescaled from fixed point scaling) floating point</li>
<li><doc-anchor-trigger to="#floatToVecU64">floatToVecU64</doc-anchor-trigger>: Converts a floating point element to 4 u64s representing a fixed point field element</li>
<li><doc-anchor-trigger to="#bufferToVecOfVecU64">bufferToVecOfVecU64</doc-anchor-trigger>: Converts a buffer to vector of vector of 4 u64s</li>
</ul>
<p>The engine methods use web assembly in the backend to support running rust code in a browser/JS context.
Non primitive data types passed to and returned from WASM bindings must come in a serialized (buffer) format.
These serialize and deserialize methods make it easier to convert JS objects to and from a format that can be accepted by the engine methods.</p>
<ul>
<li><doc-anchor-trigger to="#serialize">serialize</doc-anchor-trigger>: Convert the JS object representation of a given artifact into a format that can be accepted by the engine methods.</li>
<li><doc-anchor-trigger to="#deserialize">deserialize</doc-anchor-trigger>: Convert the serialized representation of a given artifact into a JS object.</li>
</ul>
<hr>
<doc-anchor-target id="nodejs-vs-web-targets">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#nodejs-vs-web-targets">#</doc-anchor-trigger>
        <span>Nodejs vs Web targets</span>
    </h3>
</doc-anchor-target>
<p>The engine has two targets: <code v-pre>nodejs</code> and <code v-pre>web</code>. The <code v-pre>nodejs</code> target is used for nodejs applications (e.i. nodejs serverside data processing) and the <code v-pre>web</code> target is used for browser applications (e.i. React front ends). From a peformance standpoint, the only
difference between the two is that the web bundle supports multithreading via a web worker instance and nodejs does not.</p>
<p>This readme will focus on documenting the web target. If you are interested in using the nodejs target, please refer to the unit tests
we wrote for <a href="https://github.com/zkonduit/ezkljs-engine/tree/main/tests">them</a>.</p>
<p>If you just want to jump right into viewing an example application that demonstrates how to use all of the core engine bindings check out <a href="https://ezkljs-engine.vercel.app/">this app</a>. The code for which can be found <a href="https://github.com/zkonduit/ezkljs-engine/tree/main/app">here</a></p>
<doc-anchor-target id="cross-origin-isolation-very-important">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#cross-origin-isolation-very-important">#</doc-anchor-trigger>
        <span>Cross Origin Isolation [VERY IMPORTANT].</span>
    </h3>
</doc-anchor-target>
<p>In order to use &quot;SharedArrayBuffer&quot; feature in all browsers, you need to ensure the global <code v-pre>crossOriginIsolated</code> is set to <code v-pre>true</code>. Otherwise, the ezkljs engine bindings might not work across all browsers, as the WebAssembly memory is shared between the main thread and the web worker. Follow <a href="https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/secure/cross-origin-isolation-guide/index.md">this guide</a> by Google to ensure your web app is cross origin isolated. In the example app we built using next js, we enabled cross origin isolation by adding the following to our next.config.js file:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">const nextConfig = {
    async headers() {
      return [
        {
          source: '/(.*)',
          headers: [
            {
              key: 'Cross-Origin-Embedder-Policy',
              value: 'require-corp',
            },
            {
              key: 'Cross-Origin-Opener-Policy',
              value: 'same-origin',
            },
          ],
        },
      ];
    },
  };</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="engine-debugging">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#engine-debugging">#</doc-anchor-trigger>
        <span>Engine Debugging</span>
    </h3>
</doc-anchor-target>
<p>To make the errors returned by the engine comprehenadble, we recommend calling the <code v-pre>init_panic_hook</code> method before calling any of the other engine methods.
This will ensure that the engine errors are logged to the console in a readable format, otherwise if an error does throw it will be logged to the console as <code v-pre>RuntimeError: unreachable</code></p>
<p>If you also want to print debug statments from the engine, you can call the <code v-pre>init_logger</code> method. This will print all debug statments to the console.</p>
<doc-anchor-target id="instantiating-a-new-web-assembly-instance">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#instantiating-a-new-web-assembly-instance">#</doc-anchor-trigger>
        <span>Instantiating a new web assembly instance.</span>
    </h3>
</doc-anchor-target>
<p>If you are using the web bundle, you will first need to initialize a web assembly module before you can use any of the methods exposed by the engine. To do this import the default export from <code v-pre>@ezkljs/engine/web/ezkl.js</code> and then call it. If you want to overide the default WASM memory size, you can pass in a WebAssembly.Memory object as the second argument. We highly recommend doing this if you want your application to be compatible with mobile browsers, as the default memory allocation is too large for iOS browsers. From our experimentation, we have found that the maximum memory allocation that iOS browsers can handle is 4096 mb (default is 65536 mb).</p>
<p>In the example code below, we call each of these potential &quot;setup&quot; methods in the useEffect hook of the home component of a Next.js
application::</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">
import init, { init_panic_hook, init_logger } from '@ezkljs/engine/web/ezkl.js'

export default function Home() {

  useEffect(() =&gt; {
    async function run() {
      // Initialize the WASM module. Here we are overiding the default memory allocation with the recommend allocation to be compatible across all
      // browsers, including mobile browsers (the most limiting in terms of memory allocation).
      await init(undefined, new WebAssembly.Memory({initial:20,maximum:4096,shared:true}))
      // Initialize the panic hook and logger
      init_panic_hook()
      init_logger()
    }
    run()
  })

}
</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="generating-a-witness">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#generating-a-witness">#</doc-anchor-trigger>
        <span>Generating a witness</span>
    </h3>
</doc-anchor-target>
<p>Check out the generate witness form in the example app <a href="https://ezkljs-engine.vercel.app/gen-witness">here</a>. To generate a witness from a given input, you can use the <code v-pre>genWitness</code> method. You can think of the witness as the input output pair that gets generated by quantizing the input, running it through the quantized model and performing any hashing or encryption. This witness file contains the input and output pair needed to prove statements such as &quot;I ran my neural network on this data and it produced this output&quot;. Link to the method used here in the example app: <a href="https://github.com/zkonduit/ezkljs-engine/blob/main/app/Utils.tsx#L240">handleGenWitnessButton</a>.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { genWitness, deserialize } from '@ezkljs/engine/web'

// This is the code for the button that triggers the 
// witness generation that we used in the example app. 

export async function handleGenWitnessButton&lt;T extends FileMapping&gt;(
  files: T,
): Promise&lt;Uint8ArrayResult&gt; {
  const result = await convertFilesToFilesSer(files)
  const start = performance.now();  // Start the timer

  let output = genWitness(
    result['compiled_model'],
    result['input']
  )

  let witness = deserialize(output)

  console.log(JSON.stringify(witness, null, 2))  

  const end = performance.now();  // End the timer

  return {
    output: output,
    executionTime: end - start
  }
}</code></pre>
</doc-codeblock></div>
<p>Output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
  &quot;inputs&quot;: [
    [
      [
        &quot;14385415396251402209&quot;,
        &quot;2429374486035521128&quot;,
        &quot;12558163205804149944&quot;,
        &quot;2583518171365219058&quot;
      ],
      [
        &quot;6425625360762666998&quot;,
        &quot;7924344314350639699&quot;,
        &quot;14762033076929465436&quot;,
        &quot;2023505479389396574&quot;
      ],
      [
        &quot;1949230679015292902&quot;,
        &quot;16913946402569752895&quot;,
        &quot;5177146667339417225&quot;,
        &quot;1571765431670520771&quot;
      ]
    ]
  ],
  &quot;outputs&quot;: [
    [
      [
        &quot;415066004289224689&quot;,
        &quot;11886516471525959549&quot;,
        &quot;3696305541684646538&quot;,
        &quot;3035258219084094862&quot;
      ],
      [
        &quot;956231351009279921&quot;,
        &quot;10951436676983309100&quot;,
        &quot;2250248050743556928&quot;,
        &quot;1228298028208591648&quot;
      ],
      [
        0,
        0,
        0,
        0
      ],
      [
        0,
        0,
        0,
        0
      ]
    ]
  ],
  &quot;processed_inputs&quot;: null,
  &quot;processed_params&quot;: null,
  &quot;processed_outputs&quot;: null,
  &quot;max_lookup_inputs&quot;: 22
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="elgamal-variables">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#elgamal-variables">#</doc-anchor-trigger>
        <span>Elgamal Variables</span>
    </h3>
</doc-anchor-target>
<p>Check out the encryption form in the example app <a href="https://ezkljs-engine.vercel.app/encryption">here</a>. You can generate a random ElGamal keypair from a random seed to use for encryption and decryption by using the <code v-pre>elgamalGenRandom</code> method. Link to the methods used here in the example app: <a href="https://github.com/zkonduit/ezkljs-engine/blob/main/app/Utils.tsx#L196">handleGenREVButton</a></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { elgamalGenRandom, deserialize } from '@ezkljs/engine/web'

// Function to generate a 256 bit seed in the browser 
// using a cryptographically secure source of randomness. 
// DO NOT USE MATH.RANDOM AS ITS NOT A SECURE SOURCE OF RANDOMNESS
function generate256BitSeed(): Uint8ClampedArray {
  const uuid = self.crypto.randomUUID();
  const buffer = new TextEncoder().encode(uuid)
  let seed = self.crypto.getRandomValues(buffer);
  seed = seed.slice(0, 32);
  return new Uint8ClampedArray(seed.buffer);
}

// Function to convert the return buffer elgamalGenRandom into a JSON object
function uint8ArrayToJsonObject(uint8Array) {
    let string = new TextDecoder().decode(uint8Array);
    let jsonObject = JSONBig.parse(string);
    return jsonObject;
}

const buffer = elgamalGenRandom(generate256BitSeed())

// We can take a look at the serialized contents of the 
// buffer returned by elgamalGenRandom by converting 
// the Uint8Array to a JSON object
let elgamalVariables = deserialize(buffer)

console.log(JSON.stringify(elgamalVariables, null, 2))</code></pre>
</doc-codeblock></div>
<p>Output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">{
  &quot;r&quot;: [
    &quot;3454421873345507054&quot;,
    &quot;16808310348879090885&quot;,
    &quot;8288793628600014913&quot;,
    &quot;1828575853528138165&quot;
  ],
  &quot;sk&quot;: [
    &quot;8833745371820985590&quot;,
    &quot;8074024378078747364&quot;,
    &quot;11905923764904461178&quot;,
    &quot;851912620759564510&quot;
  ],
  &quot;pk&quot;: [
    [
      &quot;10721601427614006364&quot;,
      &quot;165460855961439422&quot;,
      &quot;2494139285445986520&quot;,
      &quot;993922445972607230&quot;
    ],
    [
      &quot;11418900806032782576&quot;,
      &quot;15880182954156597531&quot;,
      &quot;16112055391177898581&quot;,
      &quot;485390167428225782&quot;
    ]
  ],
  &quot;aux_generator&quot;: [
    [
      &quot;13503889609873471352&quot;,
      &quot;8660427972151475473&quot;,
      &quot;16373159693836788928&quot;,
      &quot;3475191407935738629&quot;
    ],
    [
      &quot;9899281824843853575&quot;,
      &quot;11168630486339379471&quot;,
      &quot;550474616581266472&quot;,
      &quot;3277527638473654200&quot;
    ]
  ],
  &quot;window_size&quot;: 4
}</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="elgamal-encrypt">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#elgamal-encrypt">#</doc-anchor-trigger>
        <span>Elgamal Encrypt</span>
    </h3>
</doc-anchor-target>
<p>Check out the encryption form in the example app <a href="https://ezkljs-engine.vercel.app/encryption">here</a>. Using the public key (pk) and randomness (r) from the previous step, you can encrypt an arbitrary message using the <code v-pre>elgamalEncrypt</code> method.</p>
<p>In the example app we use this <a href="https://github.com/zkonduit/ezkljs-engine/blob/main/app/Utils.tsx#L113">ElgamalZipFileDownload</a> method to download the
r, sk and pk fields of the elgamalVariables as JSON files.</p>
<p>Once you have downloaded your Elgamal variables by clicking the &quot;Generate&quot; button at the top of the page,
you can unzip the &quot;elgamal_var&quot; file in your download folder.</p>
<p>After which you need to create a text file that contains a message you wish to encrypt.<br />
Since elgamal encrypt is a ZKP operation, we need to convert the message into
serialized field elements represented as u254s. We serialize the field elements
by breaking up each u254 field element into 4 u64s.</p>
<p>For reference, check out the example message file <a href="https://github.com/zkonduit/ezkljs-engine/tree/main/public/data/message.txt">here</a></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { elgamalEncrypt, deserialize } from '@ezkljs/engine/web'

// This is the code for the button that triggers the 
// generation of the elgamal encyrption ciphertext. 

export async function handleGenElgamalEncryptionButton&lt;T extends FileMapping&gt;(
  files: T,
): Promise&lt;Uint8ArrayResult&gt; {
  const result = await convertFilesToFilesSer(files)

  const start = performance.now();  // Start the timer

  let output = elgamalEncrypt(
    result['pk'],
    result['message'],
    result['r']
  )

  const end = performance.now();  // End the timer

  let cipherText = deserialize(output)

  console.log(JSON.stringify(cipherText, null, 2))    

  return {
    output: output,
    executionTime: end - start
  }
}</code></pre>
</doc-codeblock></div>
<p>Output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">[
  [
    [
      &quot;10209188590651781239&quot;,
      &quot;1606867371818388001&quot;,
      &quot;2009969314029440862&quot;,
      &quot;68539226482053667&quot;
    ],
    [
      &quot;11542493346099842483&quot;,
      &quot;15506753538305362096&quot;,
      &quot;11085744708984070406&quot;,
      &quot;1449434265777497591&quot;
    ],
    [
      &quot;14888253900846995994&quot;,
      &quot;17596893823803099477&quot;,
      &quot;7958618303962015576&quot;,
      &quot;30430041561409514&quot;
    ]
  ],
  [
    [
      &quot;10873062863189913544&quot;,
      &quot;1639997932972316199&quot;,
      &quot;7128784801669346971&quot;,
      &quot;2001604198948701760&quot;
    ],
    [
      &quot;10873062863189913545&quot;,
      &quot;1639997932972316199&quot;,
      &quot;7128784801669346971&quot;,
      &quot;2001604198948701760&quot;
    ]
  ]
]</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="elgamal-decrypt">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#elgamal-decrypt">#</doc-anchor-trigger>
        <span>Elgamal Decrypt</span>
    </h3>
</doc-anchor-target>
<p>Check out the encryption form in the example app <a href="https://ezkljs-engine.vercel.app/encryption">here</a>. Using the secret key (sk) and ciphertext from the previous step, you can decrypt the ciphertext using the <code v-pre>elgamalDecrypt</code> method.
Method used in the example app: <a href="https://github.com/zkonduit/ezkljs-engine/blob/main/app/Utils.tsx#L222">handleGenElgamalDecryptionButton</a></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { elgamalDecrypt, deserialize } from '@ezkljs/engine/web'

// This is the code for the button that triggers the 
// generation of the elgamal decryption of the ciphertext. 
export async function handleGenElgamalDecryptionButton&lt;T extends FileMapping&gt;(
  files: T,
): Promise&lt;Uint8ArrayResult&gt; {
  const result = await convertFilesToFilesSer(files)
  const start = performance.now();  // Start the timer

  let output = elgamalDecrypt(
    result['cipher'],
    result['sk']
  )

  const end = performance.now();  // End the timer

  let message = deserialize(output)

  console.log(JSON.stringify(message, null, 2))   

  return {
    output: output,
    executionTime: end - start
  }
}</code></pre>
</doc-codeblock></div>
<p>Output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">[
  [
    0,
    0,
    0,
    0
  ],
  [
    1,
    0,
    0,
    0
  ]
]</code></pre>
</doc-codeblock></div>
<p>And as you can see, the output matches the original message inside of message.txt that we encrypted :-)</p>
<hr>
<doc-anchor-target id="prove">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#prove">#</doc-anchor-trigger>
        <span>Prove</span>
    </h3>
</doc-anchor-target>
<p>Check out the proving form in the example app <a href="https://ezkljs-engine.vercel.app/prove">here</a>. Once you have all the necessary artifacts needed to prove (Witness, Proving Key, Compiled Onnx Model and SRS) you can generate a proof using the <code v-pre>prove</code> method.
Method use in the example app <a href="https://github.com/zkonduit/ezkljs-engine/blob/main/app/Utils.tsx#L174">handleGenProofButton</a></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { prove, deserialize } from '@ezkljs/engine/web'

// This is the code for the button that triggers the 
// generation of a proof.
export async function handleGenProofButton&lt;T extends FileMapping&gt;(
  files: T,
): Promise&lt;Uint8ArrayResult&gt; {
  const result = await convertFilesToFilesSer(files)

  const start = performance.now();  // Start the timer

  let output = prove(
    result['data'],
    result['pk'],
    result['model'],
    result['srs'],
  )
  
  const end = performance.now();  // End the timer

  let proof = deserialize(output)

  console.log(JSON.stringify(proof.proof, null, 2))
  console.log(JSON.stringify(proof.instances, null, 2))

  return {
    output: output,
    executionTime: end - start
  }
}</code></pre>
</doc-codeblock></div>
<p>Output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">&quot;061557cfc629ce604da894831cd029d0444acf4f7e384d980e1ba7a5204f71a42a4c51e0a713df141416fd197367b56cfb3a56b1a5c7bd137f25046aa051665612f99bb5511db4b3d582f052ec82ed49356370e792ac669a8e940d3568285bbc10c78295369f844ada048e5efa897a227f05f68cc62706b145f88e3f943e559021dcd03884e21668db5cd925ce6807d6549e851709a7a3a8ac7b9666d1b2c0100d8a2682aa56d96a2ce8d0ae671e0c35c9c43e380308d246e7613122beca4f0828cdf8c9eebb0d9ee5a82a99a16c83ee5af9830a532a37c20e9f007d3f0312c200bd527998d6bbf40fab9e56bebd691ccc8131800a9b52851aea5019d06b736c1c44165d3c1992de958365a24f151606a4a50ffd121765d5283f7f809fa684432504487d8c48f12aeaf9caf30133f9ab1ec820e18db051b2ea31f2a10174514c2fe7a9f069c9913c3ee92a5deb9ab2fe9960d9a538ca00c3e0fb2cc457b899702aa74659de954943d3a5b589f82502693997178fa55a4f8677cd908e8ddcd9801cb371b84319454d1e8e1028f61bd355ae90689f6d3793444cb343cfe4ea637f2171d720686e0de1415d608c66ea9780c1abc0c884520e81a79ff8c11f5c339c2fb76fc9740cadb6eacee21f5c4adda72dce152d513c6562f3a7d23acfa83eff124945177df5433f7929730caae3622748a1ca86a0f73d838fcdb35f2a5686f02cba638cb1e5dff403519bf4813c60782f79cf08f2e583c490670e126a21213704fde2b3a4f9a8c418b3278bfe2f55ff47c6aa2015ded6752829b3cee375941315c98e5e31d0f4ec9b894ec51fee3941c438c974c51c41316de87b09be96f5f00fcfd4a5f556069e5798f49de750328088864927d4e4fe981550e5db1b981cff01ec4b2d03f63d3b4af7dd228f44c0b9b0ad4b72caf9bf7d4cd8c5b0ca51a9cd13fcda2a4cac59a8dd387ee6f503bbfd463ee379fb89aaa0cd6cffcbd95bb7ac1a1fa808ce43262d64c2fe355fdeae74ed366d27840dda8d0fe55ba6ffcef20e1be8475b82348ec92e6025c2496e11448d8b33377a360fca6d2918898a686c982db58e3bd42491992af5b4aea77e6991ae1f039f87bd3ed19b9ec74423956a3708d42d087723886ddd1c5486ed16610a123250c3c5e6014689d2767b4b4e22ef1e3af64dee3c29529c19be5081fdcb0a40171965ad5985dd942a836617f9dbbe012f27810b056ecc44636fadbc71943de4a20ffd3dc97238b0dbca16be8c10180d116ba8cc95eeb91d10d5e19f59303e984a845437a2c850021b2aa3c2141b3e020d1469095d76fb8298a870761fd2fcc2fc8057bf030f62ac3144a5770c60b0000000000000000000000000000000000000000000000000000000000000000025865fabaaa498f6b2042243bea2276cc7cdcf25e091f96a43eddaefd2a6a935013a3354557867640b7e902a005357c86c983aaee40bccb10eb8d6db6415915e1b477e066537576f70026752c4a27da71d491787297c18ba10f2a42db41b13df2d4096ced97df14e8c89a27bbc0e26b828dad7f5005e98e201992d3849611f520a0ed6030f402c363e526bf3607cced57998af94af4b6800ba87a685edbf742b202130ece182d26daefcfbe7412ff629407701d9adeff18446edaefd9abf6c98000000000000000000000000000000000000000000000000000000000000000000bda3a6a626469e211146d2f95c86d27f2a5b9d6d68f0a9670cee1243955c0f0ae946af8d44a1c2d448c9e024d2bbe96e5d2fea5d7915ca8eb481149bfadef20ecfee1f2b7d4a2ab4df06e00486bc1bd1c617f4d59a63fc2ec237594364f7510230555057f2f18e41e3d497f29bc9a30e2cbb17896f3e7f47ae0c010264b74501a6e3c81f4a937b66fc4baa9aa1cd062cdffdfecfef96f25b52f904c8b9d5b00fdd517551727930dd77dd45abee71f7aa50966d6e97aa4ba24831bacdd6354a18930a821ae32be9c13e66e4cb2a82c4d9e9ffd500c812c9a9a731a288d9c2361888a4e1b1a43df2fe0eca25a20025b1fccef7a4da7f808e59d050b652551fa100eeac3b40d1280d81aba6a3bfb433421427713de0d5d0b0a3639f1c7a4be64b2949b981ef4878eece723328d64def0ad4df93a2774d6a882ff0b6cd039239d627305afa05611ce6705dedef6c8cb221a1f251df9b3f1a04bb66ddc64a3feac51c01e60a44f75a12585a003ae3ddfdefa7568d8b30a31e2e5e8252aa9f34e476253ae4d74edd37762da29a7287184a2b7052d3b133721407aa36b5c9996e68c70b754ea01d61e33600675eb551a78f9fbb5b2abaf9a6b4c06b6cb2046b1eba8b2691a9fb51778a8bb703a618ff4406336431f38dd6927b254bc13428883ae6520e7139fcf91c3ec9c1e2cffbd588759f55308bdde05292d97988056e23a5814c1725005ba922bcadd7efbe9144f55628330b6d6d7e75d634b917e69b648ef2fc267660bd34097a148cbce8d2e9bfb96c57c8de474bd0e8de959f76f7eea00cfe05de16ea880ec32cf78d401a6210bec843dbdcc3b55df477887fce3b921ec76a019098130b9a6bcde1ea663d118e28e6b1878a5826679483ab408ed1a128561d0b62d261638e6f75f70b0406102cf15270c719be349cadec69638972ffc3dfed2afa94ed6db88dd30fc3c370115a1b317c6994f1afb1b74e1bf123b176f5665e2f419728174208207da99c5a6fbf8eaadecfbbd7d028866dcc737b8bff64b8c40bb3ca88b64c55a6b6ecafc5336c130eafc53d44a40e26a3b0bd8270bfa32c2e&quot;

[
  [
    [
      0,
      0,
      0,
      0
    ],
    [
      0,
      0,
      0,
      0
    ],
    [
      0,
      0,
      0,
      0
    ],
    [
      0,
      0,
      0,
      0
    ]
  ]
]</code></pre>
</doc-codeblock></div>
<hr>
<doc-anchor-target id="verify">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#verify">#</doc-anchor-trigger>
        <span>Verify</span>
    </h3>
</doc-anchor-target>
<p>Check out the verifying form in the example app <a href="https://ezkljs-engine.vercel.app/verify">here</a>. When the proof has been generated, you can verify it using the <code v-pre>verify</code> method. In addition to the proof, you will need to pass the file contents of the
verification key, circuit settings and srs files. If all the artifacts are correct, the verify method will return true.
The method used in the example app: <a href="https://github.com/zkonduit/ezkljs-engine/blob/main/app/Utils.tsx#325">handleVerifyButton</a></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { verify } from '@ezkljs/engine/web'

// This is the code for the button that triggers the
// verification of a proof.
export async function handleVerifyButton&lt;T extends FileMapping&gt;(
  files: T,
): Promise&lt;VerifyResult&gt; {
  const result = await convertFilesToFilesSer(files)

  const start = performance.now();  // Start the timer

  let output = verify(
    result['proof'],
    result['vk'],
    result['circuitSettings'],
    result['srs'],
  )

  const end = performance.now();  // End the timer

  console.log(output)

  return {
    output: output,
    executionTime: end - start
  }
}</code></pre>
</doc-codeblock></div>
<p>Output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">true</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="hash">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#hash">#</doc-anchor-trigger>
        <span>Hash</span>
    </h3>
</doc-anchor-target>
<p>Check out the hashing form in the example app <a href="https://ezkljs-engine.vercel.app/hashing">here</a>. We can also use the engine to hash a given message using the Poseidon hash function.
Like with the elgamal encryption and decryption, we need to convert the message into
serialized field elements.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-typescript"><code v-pre class="language-typescript">import { hash, deserialize } from '@ezkljs/engine/web'

// This is the code for the button that triggers the
// posiedon hashing of a message.
export async function handleGenHashButton(message: File): Promise&lt;Uint8Array&gt; {
  const message_hash = await readUploadedFileAsBuffer(message)
  let output = poseidonHash(message_hash)
  let hash = deserialize(output)
  console.log(JSON.stringify(hash, null, 2))
  return output
}</code></pre>
</doc-codeblock></div>
<p>If you use the same message.txt file from the elgamal encryption example, you should get the following output:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-json"><code v-pre class="language-json">[
  [
    [
      &quot;11803729404268464273&quot;,
      &quot;978666863701269549&quot;,
      &quot;3979600028898666103&quot;,
      &quot;2559194768255192844&quot;
    ]
  ]
]</code></pre>
</doc-codeblock></div>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../visibility_what_is_private/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">Visibility: What is Private?</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../js_bindings/verify/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">Verify</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright Zkonduit Inc. 2024. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Engine", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
