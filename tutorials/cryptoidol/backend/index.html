<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.6.0.783524690813">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.6.0">

    <!-- Primary Meta Tags -->
    <title>Idol Backend Tutorial</title>
    <meta name="title" content="Idol Backend Tutorial">
    <meta name="description" content="This is part 3 of our tutorial on building the Cryptoidol demo app; check out the backend and frontend">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.ezkl.xyz/tutorials/cryptoidol/backend/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.ezkl.xyz/tutorials/cryptoidol/backend/">
    <meta property="og:title" content="Idol Backend Tutorial">
    <meta property="og:description" content="This is part 3 of our tutorial on building the Cryptoidol demo app; check out the backend and frontend">
    <meta property="og:image" content="https://docs.ezkl.xyz/assets/idolbackendscreen.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.ezkl.xyz/tutorials/cryptoidol/backend/">
    <meta property="twitter:title" content="Idol Backend Tutorial">
    <meta property="twitter:description" content="This is part 3 of our tutorial on building the Cryptoidol demo app; check out the backend and frontend">
    <meta property="twitter:image" content="https://docs.ezkl.xyz/assets/idolbackendscreen.png">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../../resources/css/retype.css?v=3.6.0.783524690813" rel="stylesheet">

    <script data-cfasync="false" src="../../../resources/js/config.js?v=3.6.0.783524690813" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../../resources/js/retype.js?v=3.6.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../../resources/js/lunr.js?v=3.6.0.783524690813" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../../resources/js/prism.js?v=3.6.0.783524690813" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../../" class="flex items-center leading-snug text-2xl">
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">EZKL</span>
                        </a><span class="hidden px-2 py-1 ml-4 text-sm font-semibold leading-none text-root-logo-label-text bg-root-logo-label-bg rounded-sm md:inline-block">Docs</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/zkonduit/ezkl">EZKL GitHub</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/mqgdwdSgzA">EZKL Discord</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://t.me/+QRzaRvTPIthlYWMx">EZKL Telegram</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://blog.ezkl.xyz">EZKL Blog</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/zkonduit/ezkl">EZKL GitHub</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/mqgdwdSgzA">EZKL Discord</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://t.me/+QRzaRvTPIthlYWMx">EZKL Telegram</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://blog.ezkl.xyz">EZKL Blog</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="idol-backend-tutorial" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#idol-backend-tutorial">#</doc-anchor-trigger>
        <span>Idol Backend Tutorial</span>
    </h1>
</doc-anchor-target>
<p>This is part 3 of our tutorial on building the <a href="https://cryptoidol.tech">Cryptoidol</a> demo app; check out the <a href="https://github.com/zkonduit/cryptoidol">backend</a> and <a href="https://github.com/zkonduit/cryptoidol-frontend">frontend</a>.</p>
<p>Setting up the proving server is very involved. Perhaps you have better things to do and would prefer a hosted service that computes proofs for your application. We now offer a managed service, ezkl hub, which takes care of all this work.</p>
<p><a href="https://mmycoj5vy74.typeform.com/to/Z2aikKUt">Click here</a> to join the waiting list and try out ezkl hub.</p>
<doc-anchor-target id="overview">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#overview">#</doc-anchor-trigger>
        <span>Overview</span>
    </h1>
</doc-anchor-target>
<p>So you have trained the model and obtained the public key and verifier key. There’s a new problem: how are you going to serve the proofs to your users?</p>
<p>To do this we need a server. There are a number of ways to build a server. In this tutorial we will leverage the python bindings and use the Flask web framework because it is quick and easy to use. We’ve found that many teams using ezkl end up building their own proof server, so we decided to make a simple one part of a tutorial repo to save you time.</p>
<doc-anchor-target id="step-1-setting-up-the-flask-app">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1-setting-up-the-flask-app">#</doc-anchor-trigger>
        <span>Step 1. Setting up the Flask App</span>
    </h2>
</doc-anchor-target>
<p>We are going to use poetry <a href="https://python-poetry.org/">https://python-poetry.org/</a> as a way of managing our packages. If you are already familiar with npm and yarn, poetry is the equivalent in python. It has the added benefit of resolving package dependencies which ensures that you have all the compatible versions needed.</p>
<p>First, install poetry <a href="https://python-poetry.org/docs/">https://python-poetry.org/docs/</a>. After you install poetry you can simply run</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">poetry init </code></pre>
</doc-codeblock></div>
<p>This will setup a poetry environment in the root of your repository. Follow the setup instructions provided. You can skip the dependency setup in the poetry init script for now. We will use the <code v-pre>add</code> command instead to install the dependencies.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">poetry add flask ezkl celery redis librosa gunicorn flask-cors pydub mclbn256</code></pre>
</doc-codeblock></div>
<p>There may be a need to install other system dependencies. So if the install fails, try running the following (if you are on a Debian system).</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">apt-get install -y gcc g++ cmake make gfortran pkg-config libffi-dev git curl ffmpeg libavcodec-extra libssl-dev</code></pre>
</doc-codeblock></div>
<p>In the root of your repository, create a <code v-pre>[app.py](http://app.py)</code> file to set up the initial server. We’re going to keep things simple here and not use blueprints. The backend is mostly going to be a REST API server. Create a test server as such.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># app.py

from flask import Flask, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

@app.route('/', methods=['GET'])
def index():
    return jsonify({'status': 'ok', 'res': &quot;Welcome to ezkl proving server&quot;})

if __name__ == &quot;__main__&quot;:
		app.run(port=8000)</code></pre>
</doc-codeblock></div>
<p>Access the poetry virtual environment by calling</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">poetry shell</code></pre>
</doc-codeblock></div>
<p>After which you may then start the server by calling</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">python app.py</code></pre>
</doc-codeblock></div>
<p>In your browser you should be able to see the index endpoint when you navigate to the <a href="http://localhost">localhost</a>:<port> endpoint where your server is being served if you have successfully created the server.</p>
<p><figure class="content-center">
    <img src="../../../assets/idolbackendscreen.png" alt="Screenshot">
    <figcaption class="caption">Screenshot</figcaption>
</figure>
</p>
<p>Congratulations! You have just set up a basic Flask server.</p>
<doc-anchor-target id="step-2-setting-up-celery">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2-setting-up-celery">#</doc-anchor-trigger>
        <span>Step 2: Setting up Celery</span>
    </h2>
</doc-anchor-target>
<p>Now we need a way of proving things without blocking the server. While it is possible to use asynchronous python to achieve this, it might be better to delegate the proofs to another process entirely. One way of achieving this is with a job queue and worker processes that can pick up jobs from that job queue. The Python ecosystem has Celery which does this well.</p>
<p>For Celery to work, we will need Redis and RabbitMQ, Redis is a key-value database to pass results to and from various worker processes. RabbitMQ is the message passing service for the job queue. Now append to the existing <a href="http://app.py">app.py</a> with the following</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># app.py
from flask import Flask, jsonify
from flask_cors import CORS
from celery import Celery

app = Flask(__name__)
CORS(app)

# Add the config for celery here
app.config[&quot;CELERY_BROKER_URL&quot;] = os.getenv('APP_BROKER_URI')
app.config[&quot;TEMPLATES_AUTO_RELOAD&quot;] = True
celery = Celery('worker', backend=os.getenv('APP_BACKEND'),
                broker=app.config[&quot;CELERY_BROKER_URL&quot;])

celery.conf.update(app.config)

@app.route('/', methods=['GET'])
def index():
    return jsonify({'status': 'ok', 'res': &quot;Welcome to ezkl proving server&quot;})

if __name__ == &quot;__main__&quot;:
		app.run(port=8000)</code></pre>
</doc-codeblock></div>
<p>Now, if you try to start the server it should fail. This is because the various environment values are not set up. While you can manually run redis and rabbitmq locally, it’s much simpler to use docker for this. We will use docker compose to orchestrate this. Install <a href="https://www.docker.com/">docker</a> first.</p>
<p>In the root of the repo, create a <code v-pre>docker-compose.yaml</code> file and add in the following.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># docker-compose.yaml

services:
  web:
    build: .
    links:
      - redis
      - rabitmq
      - worker
    depends_on:
      - redis
      - rabitmq
      - worker
    environment:
      FLASK_ENV: &quot;development&quot;
      APP_BROKER_URI: &quot;pyamqp://guest@rabitmq:5672&quot;
      APP_BACKEND: &quot;redis://redis:6379/0&quot;
      CELERY_RESULT_BACKEND: &quot;redis://redis:6379/0&quot;
    volumes:
      - .:/code
    ports:
      - &quot;6000:8000&quot;
    entrypoint: poetry
    command: run gunicorn app:app -w 3 -b 0.0.0.0:8000 --timeout 120

  redis:
    image: &quot;redis&quot;

  rabbitmq:
    image: &quot;rabbitmq&quot;

  worker:
    hostname: worker
    environment:
      APP_BROKER_URI: &quot;pyamqp://guest@rabbitmq:5672&quot;
      APP_BACKEND: &quot;redis://redis:6379/0&quot;
      CELERY_RESULT_BACKEND: &quot;redis://redis:6379/0&quot;
    build:
      context: .
    entrypoint: poetry
    command: run celery -A app.celery worker --loglevel=info
    links:
      - redis
      - rabbitmq
    depends_on:
      - redis
      - rabbitmq
    volumes:
      - .:/code</code></pre>
</doc-codeblock></div>
<p>We will create 4 services, <code v-pre>web</code> hosts the python server and serves the app via gunicorn.  <code v-pre>redis</code> runs the redis key-value database for results, <code v-pre>rabbitmq</code> will be the message passing service for the queue, and <code v-pre>worker</code> is the celery worker that will compute proofs.</p>
<p>Setup a new <code v-pre>Dockerfile</code> in the root of the repository containing the following.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">FROM --platform=linux/amd64 python:3.9.6-slim
WORKDIR /code
ENV FLASK_APP=app.py
ENV FLASK_RUN_HOST=0.0.0.0
RUN apt-get update
RUN apt-get install -y gcc g++ cmake make gfortran pkg-config libffi-dev git curl ffmpeg libavcodec-extra libssl-dev

# Copy only requirements to cache them in docker layer
WORKDIR /code
COPY poetry.lock pyproject.toml /code/
# Project initialization:
RUN poetry install
</code></pre>
</doc-codeblock></div>
<p>Now with that setup you should be able to build and run the server with the following commands</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># build the docker compose setup
docker compose build

# run the server detached
docker compose up -d

# check if the set up is working by viewing logs
docker compose logs

# check if processes are live with
docker compose ps

# if you want to remove volumes and containers after you're done
# note that the volumes here do not matter for the time being as the
# containers are mostly stateless. Proofs are ephemeral.
docker compose down -v</code></pre>
</doc-codeblock></div>
<p>If it is working you should be able to navigate to your browser at <code v-pre>0.0.0.0:8000</code> now and view the default message. If not something is wrong and we will need to debug it!</p>
<doc-anchor-target id="step-3-setting-up-the-proving-service">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-3-setting-up-the-proving-service">#</doc-anchor-trigger>
        <span>Step 3: Setting up the proving service</span>
    </h2>
</doc-anchor-target>
<p>Now with celery setup we can create an endpoint to receive proofs. We will also need all the various artifacts. Append the following to <code v-pre>app.py</code></p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># app.py
# add request here
from flask import Flask, jsonify, request
from flask_cors import CORS
from celery import Celery

# add additonal dependencies
import json
import ezkl
import tempfile
import librosa
import os
from pydub import AudioSegment
from mclbn256 import Fr

app = Flask(__name__)
CORS(app)

# Add the config for celery here
app.config[&quot;CELERY_BROKER_URL&quot;] = os.getenv('APP_BROKER_URI')
app.config[&quot;TEMPLATES_AUTO_RELOAD&quot;] = True
celery = Celery('worker', backend=os.getenv('APP_BACKEND'),
                broker=app.config[&quot;CELERY_BROKER_URL&quot;])

celery.conf.update(app.config)

# add artifacts folder here
with open(ARTIFACTS_PATH + &quot;/server_settings.json&quot;, 'r') as f:
    SERVER_SETTINGS = json.load(f)

MODEL_PATH = os.path.join(
    ARTIFACTS_PATH, SERVER_SETTINGS[&quot;model_path&quot;])

SETTINGS_PATH = os.path.join(
    ARTIFACTS_PATH, SERVER_SETTINGS[&quot;settings_path&quot;])

PK_PATH = os.path.join(
    ARTIFACTS_PATH, SERVER_SETTINGS[&quot;pk_path&quot;])

SRS_PATH = os.path.join(
    ARTIFACTS_PATH, SERVER_SETTINGS[&quot;srs_path&quot;])

@app.route('/', methods=['GET'])
def index():
    return jsonify({'status': 'ok', 'res': &quot;Welcome to ezkl proving server&quot;})

# add the task to process audio here
def extract_mel_spec(filename):
    x,sr=librosa.load(filename,duration=3,offset=0.5)
    X = librosa.feature.melspectrogram(y=x, sr=sr)
    Xdb = librosa.power_to_db(X, ref=np.max)
    Xdb = Xdb.reshape(1,128,-1)
    return Xdb

def extract_bytes_addr(addr): 
    addr_int = int(addr, 0)
    rep = Fr(addr_int)

    ser = rep.serialize()

    first_byte = int.from_bytes(ser[0:8], &quot;little&quot;)
    second_byte = int.from_bytes(ser[8:16], &quot;little&quot;)
    third_byte = int.from_bytes(ser[16:24], &quot;little&quot;)
    fourth_byte = int.from_bytes(ser[24:32], &quot;little&quot;)

    return [first_byte, second_byte, third_byte, fourth_byte]

def u64_to_fr(array):
    reconstructed_bytes = array[0].to_bytes(8, byteorder='little') \
                            + array[1].to_bytes(8, byteorder='little') \
                              + array[2].to_bytes(8, byteorder='little') \
                                + array[3].to_bytes(8, byteorder='little')
    return Fr(reconstructed_bytes)

@celery.task
def compute_proof(addr, audio):  # witness is a json string
    if not addr.startswith('0x'):
        addr = '0x' + addr
    addr_ints = extract_bytes_addr(addr)
    with tempfile.NamedTemporaryFile() as pffo:
        with tempfile.NamedTemporaryFile() as wfo:
            # write audio to temp file
            wfo.write(audio)
            wfo.flush()

            val = extract_mel_spec(wfo.name)

            # 0 pad 2nd dim to max size
            if val.shape[2] &lt; 130:
                val = np.pad(
                    val, ((0, 0), (0, 0), (0, 130-val.shape[2])))
            # truncate to max size
            else:
                val = val[:, :, :130]

            inp = {
                &quot;input_data&quot;: [[addr_ints], val.flatten().tolist()],
            }

            witness = tempfile.NamedTemporaryFile()
            audio_input = tempfile.NamedTemporaryFile(mode=&quot;w+&quot;)
            # now save to json
            json.dump(inp, audio_input)
            audio_input.flush()

            wit = ezkl.gen_witness(audio_input.name, MODEL_PATH,
                             witness.name, settings_path=SETTINGS_PATH)

            res = ezkl.prove(witness.name, MODEL_PATH,
                       PK_PATH,
                       pffo.name,
                       SRS_PATH, 'evm', 'single', settings_path=SETTINGS_PATH)

            # this is the quantized scord, which we convert to an int:
            score = u64_to_fr(wit[&quot;output_data&quot;][1][0]).__int__()

            res = {
                &quot;output_data&quot;: score,
                &quot;proof&quot;: res['proof'],
            }

        return res

@app.route('/prove', methods=['POST'])
def prove_task():
    try:
        address = request.form['address']
        f = request.files['audio'].read()
        result = compute_proof.delay(address, f)
        result.ready()  # returns true when ready
        res = result.get()  # bytes of proof

        return jsonify({'status': 'ok', 'res': res})

if __name__ == &quot;__main__&quot;:
		app.run(port=8000)</code></pre>
</doc-codeblock></div>
<p>Once this is setup you may want to restart the docker containers just to be doubly sure that new code is running.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">docker compose down -v
docker compose build
docker compose up -d
docker compose logs</code></pre>
</doc-codeblock></div>
<p>If everything is working properly, record an audio sample of yourself or find any audio file and use the following curl command to double check if the prove endpoint is working. For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">curl -F address=0x1 -F audio=@audio.wav http://0.0.0.0:8000/prove</code></pre>
</doc-codeblock></div>
<p>If the prover is working nicely you should receive the <code v-pre>output_data</code> and <code v-pre>proof</code>.</p>
<doc-anchor-target id="step-4-serving-in-production">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-4-serving-in-production">#</doc-anchor-trigger>
        <span>Step 4: Serving in Production</span>
    </h2>
</doc-anchor-target>
<p>You will want to secure the redis and rabbitmq by setting up credentials for them and the modifying the environment variables for them.</p>
<p>See the following tutorial for redis: <a href="https://nickjanetakis.com/blog/docker-tip-27-setting-a-password-on-redis-without-a-custom-config">https://nickjanetakis.com/blog/docker-tip-27-setting-a-password-on-redis-without-a-custom-config</a></p>
<p>See the following tutorial for rabbitmq: <a href="https://cloudinfrastructureservices.co.uk/create-rabbitmq-docker-container-image/">https://cloudinfrastructureservices.co.uk/create-rabbitmq-docker-container-image/</a></p>
<p>The setup will differ depending on the threat vectors, cloud providers, and how you would like to secure the backend.</p>
<p>We will also need ssl certificates, to do this we need an additional certbot and nginx service.</p>
<p>Append the following in the <code v-pre>docker-compose.yaml</code> file:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">services:
  web:
    build: .
    links:
      - redis
      - rabitmq
      - worker
    depends_on:
      - redis
      - rabitmq
      - worker
    environment:
      FLASK_ENV: &quot;development&quot;
      APP_BROKER_URI: &quot;pyamqp://guest@rabitmq:5672&quot;
      APP_BACKEND: &quot;redis://redis:6379/0&quot;
      CELERY_RESULT_BACKEND: &quot;redis://redis:6379/0&quot;
    volumes:
      - .:/code
    ports:
      - &quot;6000:8000&quot;
    entrypoint: poetry
    command: run gunicorn app:app -w 3 -b 0.0.0.0:8000 --timeout 120
  redis:
    image: &quot;redis&quot;
  rabitmq:
    image: &quot;rabbitmq&quot;
  worker:
    hostname: worker
    environment:
      APP_BROKER_URI: &quot;pyamqp://guest@rabitmq:5672&quot;
      APP_BACKEND: &quot;redis://redis:6379/0&quot;
      CELERY_RESULT_BACKEND: &quot;redis://redis:6379/0&quot;
    build:
      context: .
    entrypoint: poetry
    command: run celery -A app.celery worker --loglevel=info
    links:
      - redis
      - rabitmq
    depends_on:
      - redis
      - rabitmq
    volumes:
      - .:/code

### add this
  nginx:
    restart: always
    build:
      context: ./nginx
      dockerfile: Dockerfile
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
    links:
      - web
    depends_on:
      - web
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/conf.d/nginx.conf
      - ./data/certbot/conf:/etc/letsencrypt
      - ./data/certbot/www:/var/www/certbot
  certbot:
    image: certbot/certbot
    restart: unless-stopped
    volumes:
      - ./data/certbot/conf:/etc/letsencrypt
      - ./data/certbot/www:/var/www/certbot
    entrypoint: &quot;/bin/sh -c 'trap exit TERM; while :; do certbot renew; sleep 12h &amp; wait $${!}; done;'&quot;</code></pre>
</doc-codeblock></div>
<p>Now create a <code v-pre>./nginx</code> folder in the root of your repository. We will create two files <code v-pre>./nginx/Dockerfile</code> and <code v-pre>./nginx/nginx.conf</code> . In the <code v-pre>Dockerfile</code> we just need to remove the <code v-pre>default.conf</code> nginx file to replace with our own.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># ./nginx/Dockerfile
FROM nginx:1.21.0-alpine

RUN rm /etc/nginx/conf.d/default.conf</code></pre>
</doc-codeblock></div>
<p>Then in the <code v-pre>./nginx/nginx.conf</code> we need to specify how the reverse proxy should work.</p>
<p><strong>Important!</strong> You will need a domain for the ssl to work. You may purchase it from services like namecheap, google domains, godaddy, so on. You will also need to obtain a Debian or Ubuntu box to host the server.</p>
<p>In the <code v-pre>./nginx/nginx.conf</code> add the following</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">upstream web {
    server web:8000;
}

server {
    listen 80 default_server;
    server_name backend.cryptoidol.tech;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    location / {
        return 301 https://$host$request_uri;
    }

}

server {
    listen 443 ssl;
    server_name backend.cryptoidol.tech;
    server_tokens off;

    ssl_certificate /etc/letsencrypt/live/backend.cryptoidol.tech/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/backend.cryptoidol.tech/privkey.pem;

    location / {
        proxy_pass http://web;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_read_timeout 300s;
        proxy_connect_timeout 75s;
        client_max_body_size 10M;
    }
}</code></pre>
</doc-codeblock></div>
<p>You will now want to upload the entire repo to a Debian machine to host the server. You may do this with ftp or creating a git repo and cloning the repo into the server. Now in the server, run the same docker compose functions to set things up.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">docker compose build
docker compose up -d</code></pre>
</doc-codeblock></div>
<p>Check if your 443 and 80 ports are exposed via your DNS provider. We will need them exposed for the certbot challenge to obtain ssl certificates for your server. Copy the following script into your server to setup the challenge. Change the domains to the ones you have. This script was provided by this repo <a href="https://github.com/wmnnd/nginx-certbot/blob/master/init-letsencrypt.sh">https://github.com/wmnnd/nginx-certbot/blob/master/init-letsencrypt.sh</a>. You may want to set staging to 1 to perform a dry run, repeatedly spamming the script to debug can cause rate limits to be hit.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">#!/bin/bash

if ! [ -x &quot;$(command -v docker-compose)&quot; ]; then
  echo 'Error: docker-compose is not installed.' &gt;&amp;2
  exit 1
fi

domains=(example.org www.example.org)
rsa_key_size=4096
data_path=&quot;./data/certbot&quot;
email=&quot;&quot; # Adding a valid address is strongly recommended
staging=0 # Set to 1 if you're testing your setup to avoid hitting request limits

if [ -d &quot;$data_path&quot; ]; then
  read -p &quot;Existing data found for $domains. Continue and replace existing certificate? (y/N) &quot; decision
  if [ &quot;$decision&quot; != &quot;Y&quot; ] &amp;&amp; [ &quot;$decision&quot; != &quot;y&quot; ]; then
    exit
  fi
fi

if [ ! -e &quot;$data_path/conf/options-ssl-nginx.conf&quot; ] || [ ! -e &quot;$data_path/conf/ssl-dhparams.pem&quot; ]; then
  echo &quot;### Downloading recommended TLS parameters ...&quot;
  mkdir -p &quot;$data_path/conf&quot;
  curl -s https://raw.githubusercontent.com/certbot/certbot/master/certbot-nginx/certbot_nginx/_internal/tls_configs/options-ssl-nginx.conf &gt; &quot;$data_path/conf/options-ssl-nginx.conf&quot;
  curl -s https://raw.githubusercontent.com/certbot/certbot/master/certbot/certbot/ssl-dhparams.pem &gt; &quot;$data_path/conf/ssl-dhparams.pem&quot;
  echo
fi

echo &quot;### Creating dummy certificate for $domains ...&quot;
path=&quot;/etc/letsencrypt/live/$domains&quot;
mkdir -p &quot;$data_path/conf/live/$domains&quot;
docker-compose run --rm --entrypoint &quot;\
  openssl req -x509 -nodes -newkey rsa:$rsa_key_size -days 1\
    -keyout '$path/privkey.pem' \
    -out '$path/fullchain.pem' \
    -subj '/CN=localhost'&quot; certbot
echo

echo &quot;### Starting nginx ...&quot;
docker-compose up --force-recreate -d nginx
echo

echo &quot;### Deleting dummy certificate for $domains ...&quot;
docker-compose run --rm --entrypoint &quot;\
  rm -Rf /etc/letsencrypt/live/$domains &amp;&amp; \
  rm -Rf /etc/letsencrypt/archive/$domains &amp;&amp; \
  rm -Rf /etc/letsencrypt/renewal/$domains.conf&quot; certbot
echo

echo &quot;### Requesting Let's Encrypt certificate for $domains ...&quot;
#Join $domains to -d args
domain_args=&quot;&quot;
for domain in &quot;${domains[@]}&quot;; do
  domain_args=&quot;$domain_args -d $domain&quot;
done

# Select appropriate email arg
case &quot;$email&quot; in
  &quot;&quot;) email_arg=&quot;--register-unsafely-without-email&quot; ;;
  *) email_arg=&quot;--email $email&quot; ;;
esac

# Enable staging mode if needed
if [ $staging != &quot;0&quot; ]; then staging_arg=&quot;--staging&quot;; fi

docker-compose run --rm --entrypoint &quot;\
  certbot certonly --webroot -w /var/www/certbot \
    $staging_arg \
    $email_arg \
    $domain_args \
    --rsa-key-size $rsa_key_size \
    --agree-tos \
    --force-renewal&quot; certbot
echo

echo &quot;### Reloading nginx ...&quot;
docker-compose exec nginx nginx -s reload</code></pre>
</doc-codeblock></div>
<p>If the setup ran correctly you should now have certbot serving ssl certificates on your server. You should be able to go to your domain at <code v-pre>[https://backend.myserver.com](https://backend.myserver.com)</code> and see the same success message and also run proofs on <code v-pre>[https://backend.myserver.com/prove](https://backend.myserver.com/prove)</code></p>
<doc-anchor-target id="conclusions-and-ezkl-hub">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#conclusions-and-ezkl-hub">#</doc-anchor-trigger>
        <span>Conclusions and ezkl Hub</span>
    </h1>
</doc-anchor-target>
<p>If you have gone through all these steps you should now have a live server that is able to serve proofs!</p>
<p>Setting up the proving server is very involved. Perhaps you have better things to do and would prefer a hosted service that computes proofs for your application. We now offer a managed service, ezkl hub, which takes care of all this work.</p>
<p><a href="https://mmycoj5vy74.typeform.com/to/Z2aikKUt">Click here</a> to join the waiting list and try out ezkl hub.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../../tutorials/cryptoidol/model/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">Idol Model Tutorial</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../../tutorials/cryptoidol/contracts/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">Idol Contracts Tutorial</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright Zkonduit Inc. 2024. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Idol Backend Tutorial", level: 3, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
